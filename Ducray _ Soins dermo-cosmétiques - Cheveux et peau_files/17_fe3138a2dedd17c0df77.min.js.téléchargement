(window.CCIwebpackJsonp=window.CCIwebpackJsonp||[]).push([[17],{160:function(t,e,n){"use strict";n.r(e);var r=n(16),o=n(0),c=n.n(o),u=n(91),i=n.n(u),a=n(9),l=n(26),d=n(28),f=n(41),s=n(1),h=n(32),b=n(31),p=n(81);function E(t,e){var n={};s.q.forEach((function(e){var r=t.getAttribute("data-"+e.toLowerCase());r&&r.length&&(n[e]=r)}));var r=[s.h.EAN,s.h.MAN,s.h.PZN].filter((function(t){return!!n[t]}))[0],o=n[r];if(o)return{productId:o,productIdType:r,productConf:n,targetElement:t};if(e){var c=[s.h.EAN,s.h.MAN,s.h.PZN].filter((function(t){return!!e[t]}))[0];if(e[c])return{productId:o,productIdType:r,productConf:n,targetElement:t}}return null}function v(t,e){var n=Array.prototype.slice.call(document.querySelectorAll("[data-ccid=wtb-target]")),r=[];if(n.length&&n.forEach((function(t){var e=E(t);e&&r.push(e)})),!r.length){var o=document.querySelectorAll(s.g),c=null;if(o.length>1){var u=e[s.h.WIDGET_ID];o.forEach((function(t){t.getAttribute("data-widgetid")===u&&(c=t)}))}else c=o[0];var i=document.createElement("div");i.setAttribute("data-ccid","cc-wtb-button-container");var a=[s.h.EAN,s.h.MAN,s.h.PZN].filter((function(e){return!!t[e]}))[0],l=t[a],d=document.querySelector("#"+(null==e?void 0:e.target));(d||c).insertAdjacentElement("afterend",i),r.push({productId:l,productIdType:a,productConf:t,targetElement:i})}return r}var g=function(t,e,n){if("IntersectionObserver"in window){new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&(n("wtb_button_impression",e),r.unobserve(t.target))}))}),{root:null,rootMargin:"0px",threshold:.51}).observe(t)}},m=function(t,e,n){var r=function(e,n){var r,o=t.includes(e);return o&&(o=void 0!==n?"true"===(r=n)||!!r:o),o};return n||1===t.length?{LocalStore:t.includes(s.a.LOCAL),OnlineShop:t.includes(s.a.ONLINE)}:{LocalStore:r(s.a.LOCAL,e.displayBuyNowInStore),OnlineShop:r(s.a.ONLINE,e.displayBuyNowOnline)}},O=c.a.lazy((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,161))})),T=c.a.lazy((function(){return n.e(19).then(n.bind(null,103))})),_=c.a.lazy((function(){return n.e(18).then(n.bind(null,152))}));e.default=function(t){var e=Object(o.useContext)(a.a),n=e.appConf,u=e.productConf,y=e.appTheme,w=e.handleTriggerElement,C=e.setIsModalOpened,I=e.isModalOpened,S=e.setProductModalOpened,A=e.setCountryModalOpened,N=e.setLastClickedBtn,L=Object(o.useContext)(d.a),B=L.setProductVariant,k=L.getFilteredButtons,j=Object(o.useContext)(l.a)._t,R=Object(o.useContext)(f.a).track,D=n[s.h.BUYNOW_CHANNELS],M=Object(b.d)(n),W=n[s.h.DISPLAY_BNO],G=n[s.h.DISPLAY_BNIS],U={displayBuyNowOnline:W,displayBuyNowInStore:G},P=Object(o.useState)(null),Y=P[0],x=P[1],q=Object(o.useState)(m(D,U,M)),z=q[0],F=q[1],H=Object(o.useState)({backgroundColor:n[s.h.WTB_BUTTON_BG_COLOR],borderColor:n[s.h.WTB_BUTTON_TEXT_COLOR],color:n[s.h.WTB_BUTTON_TEXT_COLOR]})[0],Z=n[s.h.WTB_BUTTON_MODE]!==s.u.DEFAULT,J=Z&&n[s.h.WTB_BUTTON_BEHAVIOR]===s.t.STICKY,V=Z&&!J,X=j(h.a.CTA_WHERE_TO_BUY),K=Object(o.useCallback)((function(t){var e=t.getAttribute("data-bno"),n=t.getAttribute("data-bnis"),r=null!=n;return{displayBuyNowOnline:null!=e?"true"===t.getAttribute("data-bno"):W,displayBuyNowInStore:r?"true"===t.getAttribute("data-bnis"):G}}),[G,W]),Q=Object(o.useCallback)((function(t){var e=t.target,r=n[s.h.TRIGGER_SELECTOR],o=Object(p.d)(e,r);if(o){t.preventDefault();var c=e.getAttribute("data-ccwid");if(c&&c!==n[s.h.WIDGET_ID])return!1;var u=K(o);void 0!==u.displayBuyNowOnline&&void 0!==u.displayBuyNowInStore&&F(m(D,u,M)),N(o);var i=E(o,n);if(i){var a=i.productId,l=i.productIdType,d={button_host:"wtb-inline-button"===o.getAttribute("data-ccid")?"commerce_connector":"brand",button_type:"default"};a&&l&&(d["data_"+l]=a),R("wtb_button_click",d)}w(o)&&(B(null),n[s.h.COUNTRY_SELECTOR]?localStorage.getItem(n.widgetid)?(S(!0),C(!0)):(A(!0),C(!0)):(S(!0),C(!0)))}}),[n,K,N,w,D,M,R,B,S,C,A]);Object(o.useEffect)((function(){return document.addEventListener("click",Q),function(){document.removeEventListener("click",Q)}}),[Q]);window&&(window.ccInitTriggers=function(){if(u&&n){var t=v(u,n);M?k(t,F).then((function(t){return x(t)})):x(t)}}),Object(o.useEffect)((function(){if(u&&n&&!Y){var t=v(u,n);M?k(t,F).then((function(t){return x(t)})):x(t)}}),[Y,u,n,k,z,M]),Object(o.useEffect)((function(){var t=function(){Array.prototype.slice.call(document.querySelectorAll(n[s.h.TRIGGER_SELECTOR])).forEach((function(t){var e=E(t,n),r=null;if(t&&(t&&t.firstElementChild?r=t.firstElementChild.getAttribute("data-ccwid"):t&&(r=t.getAttribute("data-ccwid"))),e){var o=e.productId,c=e.productIdType,u={button_host:"brand",button_type:"default"};o&&c&&(u["data_"+c]=o),r?r===n[s.h.WIDGET_ID]&&g(t,u,R):g(t,u,R)}}))};return"complete"===document.readyState?t():window.addEventListener("load",t),function(){window.removeEventListener("load",t)}}),[R,n]),Object(o.useEffect)((function(){Z&&!J&&Y&&n&&Y.forEach((function(t){var e=t.productId,r=t.productIdType,o=t.targetElement,c=null;o&&(o&&o.firstElementChild?c=o.firstElementChild.getAttribute("data-ccwid"):o&&(c=o.getAttribute("data-ccwid")));var u={button_host:"commerce_connector",button_type:"default"};e&&r&&(u["data_"+r]=e),c?c===n[s.h.WIDGET_ID]&&g(o,u,R):g(o,u,R)}))}),[R,Z,J,Y,n]),Object(o.useEffect)((function(){J&&R("wtb_button_impression",{button_host:"commerce_connector",button_type:"sticky"})}),[R,J]);var $=Object(o.useCallback)((function(){u&&(n[s.h.COUNTRY_SELECTOR]?localStorage.getItem(n.widgetid)?(S(!0),C(!0)):(A(!0),C(!0)):(S(!0),C(!0)))}),[n,u,C,S,A]),tt=Object(o.useCallback)((function(){N("#ccStickyBtn"),R("wtb_button_click",{button_host:"commerce_connector",button_type:"sticky"}),$()}),[R,$,N]);return c.a.createElement("div",{className:i.a.container,id:"widgetMain"},J&&c.a.createElement(o.Suspense,{fallback:""},c.a.createElement(T,{active:!I,theme:y,btnStyle:H,onClick:tt,label:X})),V&&Y&&Y.map((function(t){return c.a.createElement(o.Suspense,{key:t.productId,fallback:""},c.a.createElement(_,{targetElement:t.targetElement,productConf:t.productConf,theme:y,btnStyle:H,label:X,ccwid:n[s.h.WIDGET_ID]}))})),c.a.createElement(o.Suspense,{fallback:""},c.a.createElement(O,Object(r.a)({},t,{localChannelActive:z.LocalStore,onlineChannelActive:z.OnlineShop}))))}},81:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function o(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return i})),n.d(e,"g",(function(){return a})),n.d(e,"a",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return h}));var c="";function u(t,e,n){return void 0===n&&(n=null),t?function(t,e){return c||(c=r(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(e){return o(t[e])}))),!!o(t[c])&&t[c](e)}(t,e)?t:n&&t===n?null:t.parentNode?u(t.parentNode,e):null:null}function i(){window&&(window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty())}function a(){return"ontouchstart"in window}function l(t,e,n,r){t&&(void 0===r&&(r=!0),t.addEventListener?t.addEventListener(e,n,r):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)}function d(t,e,n,r){t&&(void 0===r&&(r=!0),t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null)}function f(t,e){return t.targetTouches&&r(t.targetTouches,(function(t){return e===t.identifier}))||t.changedTouches&&r(t.changedTouches,(function(t){return e===t.identifier}))}function s(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0}function h(t,e,n){var r=u(t,'[data-clickout-type]:not([data-clickout-type=""])',n);return r?r.getAttribute("data-clickout-type"):e}},91:function(t,e,n){t.exports={container:"cc-Widget-module-container_2mNj3"}}}]);