function showPointDetailsViewPage(){$$(".catalog-points-details").invoke("show"),$$(".show-details-points-url").invoke("hide"),$$(".hide-details-points-url").invoke("show")}function hidePointDetailsViewPage(){$$(".catalog-points-details").invoke("hide"),$$(".show-details-points-url").invoke("show"),$$(".hide-details-points-url").invoke("hide")}function getTierPriceCorrection(qty,default_points){qty=qty||1;var return_value=default_points;if(0<json_tier_prices.length)for(var k=0;k<json_tier_prices.length;k++)qty>=json_tier_prices[k].price_qty&&(return_value=json_tier_prices[k].productTierPoints);return return_value}function checkJ2tPoints(){0<$("j2t-pts").innerHTML?$$(".j2t-loyalty-points").invoke("show"):$$(".j2t-loyalty-points").invoke("hide"),modifyJ2tEquivalence($("j2t-pts").innerHTML),checkJ2tCloneText()}function checkJ2tCloneText(){var text_clone;"undefined"!=typeof is_loaded_information&&$("j2t-points-clone")&&0<$$(".j2t-loyalty-points").length&&($("j2t-points-clone").style.display=$$(".j2t-loyalty-points")[0].style.display,text_clone=(text_clone=(text_clone=$$(".j2t-loyalty-points")[0].innerHTML).replace("j2t-pts","j2t-pts-clone")).replace("j2t-point-equivalence","j2t-point-equivalence-clone"),$("j2t-points-clone").innerHTML=text_clone)}function modifyJ2tEquivalence(current_points){var money_equivalence;0<$$(".j2t-point-equivalence").length&&(money_equivalence=current_points*j2t_point_default_point_unit*j2t_point_currency_base,money_equivalence=Math.round(100*money_equivalence)/100,money_equivalence=j2t_point_currency.replace("__MONEY__",money_equivalence.j2tFormatMoney(2,j2t_dec_sep,j2t_mil_sep)),current_points=(current_points=j2t_point_equivalence_txt.replace("1111",current_points)).replace("2222",money_equivalence),$$(".j2t-point-equivalence")[0].innerHTML=current_points)}function bundle_extra_points(points_passed){var extra=0;if("undefined"!=typeof bundle_rules&&null!=bundle_rules)for(var i=0;i<bundle_rules.length;i++)1==bundle_rules[i].action_type&&(extra+=bundle_rules[i].points);return extra}function bundle_muldiv_points(points_passed){if("undefined"!=typeof bundle_rules&&null!=bundle_rules)for(var i=0;i<bundle_rules.length;i++)-1==bundle_rules[i].action_type?points_passed*=bundle_rules[i].points:-2==bundle_rules[i].action_type&&(points_passed/=bundle_rules[i].points);return points_passed}function process_bundle_credit(){var points_bundle=0,qty_bundle=0;$$("#super-product-table .qty").each(function(element){element.name.sub(/[0-9]+/,function(match){optionId=match[0]}),0<(qty_bundle=isNaN(parseFloat(element.value))?0:parseFloat(element.value))&&(points_bundle+=qty_bundle*json_credit_grouped[optionId])}),points_bundle+=bundle_extra_points(),$("j2t-pts").innerHTML=Math.ceil(points_bundle+j2t_options),checkJ2tPoints()}function j2t_math_points(qty,pts_changed,tierprice_verification){tierprice_verification&&(pts_changed=getTierPriceCorrection(qty,pts_changed));tierprice_verification=0;return 0<(qty=isNaN(parseFloat(qty))?1:qty)?tierprice_verification=(pts_changed+j2t_options)*qty:0<pts_changed?tierprice_verification=pts_changed+j2t_options:0<j2t_options&&(tierprice_verification=j2t_options),Math.ceil(tierprice_verification)}function j2t_points_bundle(){var pts=0,test_qty=(bundle_select.each(function(element){element=$F(element.id);if(-1!=element.constructor.toString().indexOf("Array")){var el_array=element;if(0<el_array.length)for(var el_val,qty,id_qty,k=0;k<el_array.length;k++)""!=(el_val=el_array[k])&&(qty=1,id_qty="bundle-option-"+json_credit_bundle[el_val].optionId+"-qty-input",$(id_qty)&&0<$(id_qty).value&&(qty=$(id_qty).value),pts+=bundle_muldiv_points(json_credit_bundle[el_val].points*qty))}else""!=(el_val=element)&&(qty=1,id_qty="bundle-option-"+json_credit_bundle[el_val].optionId+"-qty-input",$(id_qty)&&0<$(id_qty).value&&(qty=$(id_qty).value),pts+=bundle_muldiv_points(json_credit_bundle[el_val].points*qty))}),bundle_radio.each(function(element){var qty,id_qty;element.checked&&void 0!==json_credit_bundle[element.value]&&(qty=1,id_qty="bundle-option-"+json_credit_bundle[element.value].optionId+"-qty-input",$(id_qty)&&0<$(id_qty).value&&(qty=$(id_qty).value),pts+=bundle_muldiv_points(json_credit_bundle[element.value].points*qty))}),bundle_checkbox.each(function(element){var qty,id_qty;element.checked&&void 0!==json_credit_bundle[element.value]&&(qty=1,id_qty="bundle-option-"+json_credit_bundle[element.value].optionId+"-qty-input",$(id_qty)&&0<$(id_qty).value&&(qty=$(id_qty).value),pts+=bundle_muldiv_points(json_credit_bundle[element.value].points*qty))}),bundle_hidden.each(function(element){var qty=1,id_qty="bundle-option-"+json_credit_bundle[element.value].optionId+"-qty-input";$(id_qty)&&0<$(id_qty).value&&(qty=$(id_qty).value),pts+=bundle_muldiv_points(json_credit_bundle[element.value].points*qty)}),pts_changed=pts+j2t_points,0);return $("qty")&&(test_qty=$("qty").value),$("j2t-pts").innerHTML=j2t_math_points(test_qty,pts_changed,!1),checkJ2tPoints(),pts}var bundle_select,bundle_radio,bundle_checkbox,bundle_hidden;function calculateOptionsPrice(){j2t_options=reloadCreditOption();var bundle_pts,test_qty=0;$("qty")&&(test_qty=$("qty").value),"undefined"!=typeof json_credit_bundle?(bundle_pts=j2t_points_bundle(),$("j2t-pts").innerHTML=j2t_math_points(test_qty,j2t_points+bundle_pts,!0)):$("j2t-pts").innerHTML=j2t_math_points(test_qty,j2t_points,!0),checkJ2tPoints()}function reloadCreditOption(){var optionPts=0;return isCustomPoints&&(config=json_option_credit,skipIds=[],$$(".product-custom-option").each(function(element){var optionId=0;element.name.sub(/[0-9]+/,function(match){optionId=match[0]}),config[optionId]&&("checkbox"==element.type||"radio"==element.type?element.checked&&config[optionId][element.getValue()]&&(optionPts+=parseFloat(config[optionId][element.getValue()])):element.hasClassName("datetime-picker")&&!skipIds.include(optionId)?(dateSelected=!0,$$('.product-custom-option[id^="options_'+optionId+'"]').each(function(dt){""==dt.getValue()&&(dateSelected=!1)}),dateSelected&&(optionPts+=parseFloat(config[optionId]),skipIds[optionId]=optionId)):"select-one"==element.type||"select-multiple"==element.type?element.options&&$A(element.options).each(function(selectOption){selectOption.selected&&config[optionId][selectOption.value]&&(optionPts+=parseFloat(config[optionId][selectOption.value]))}):""!=element.getValue().strip()&&(optionPts+=parseFloat(config[optionId])))})),optionPts}!function(doc,$){$(function(){var main=$(doc.getElementById("main-content"));main.on("click",'button[data-toggle="toggle-details"]',function(){var _elementButton,content;content=(_elementButton=this).parentNode.querySelector("button + div.toggle-details"),_elementButton.classList.contains("show-content")?(_elementButton.classList.remove("show-content"),content.style.display="",content.style.display="none"):(_elementButton.classList.add("show-content"),content.style.display="",content.style.display="block")})})}(document,jQuery),Number.prototype.j2tFormatMoney=function(c,d,t){var n,c=isNaN(c=Math.abs(c))?2:c,d=null==d?",":d,t=null==t?".":t,s=this<0?"-":"",i=parseInt(n=Math.abs(+this||0).toFixed(c))+"",j=3<(j=i.length)?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")},document.observe("dom:loaded",function(){var product_downloadable;"undefined"!=typeof is_loaded_information&&$("j2t-pts")&&0<(product_downloadable=$$(".product-downloadable-link")).length&&product_downloadable.each(function(element){Event.observe(element,"change",function(){this.checked?$("j2t-pts").innerHTML=Math.ceil(j2t_points+parseFloat(json_credit_downloadable[this.value])+j2t_options):$("j2t-pts").innerHTML=Math.ceil(j2t_points+j2t_options),checkJ2tPoints()})})}),document.observe("dom:loaded",function(){"undefined"!=typeof is_loaded_information&&"undefined"!=typeof is_bundle&&is_bundle&&$("j2t-pts")&&($$("#super-product-table .qty").each(function(element){"SELECT"==element.nodeName?Event.observe(element,"change",function(){process_bundle_credit()}):Event.observe(element,"keyup",function(){process_bundle_credit()})}),process_bundle_credit())}),document.observe("dom:loaded",function(){var product_settings,oldSpConfigure;"undefined"!=typeof is_loaded_information&&"undefined"!=typeof isCustomPoints&&isCustomPoints&&$("j2t-pts")?($("qty")&&Event.observe($("qty"),"keyup",function(){processPointsSelects()}),product_settings=$$(".super-attribute-select"),processPointsSelects=function(){if(0<product_settings.length){var concat_val="",dont_process_it=(j2t_points=0,!1);if($$(".super-attribute-select").each(function(el){""==el.value&&(dont_process_it=!0),""!=concat_val?concat_val+="|"+el.value:concat_val=el.value}),!dont_process_it&&""!=concat_val){var used_qty=0,used_qty=(used_qty=$("qty")?$("qty").value:used_qty)<=0||""==used_qty||isNaN(used_qty)?1:used_qty;if(null!=json_credit[concat_val]){if(j2t_points=json_credit[concat_val],null!=json_credit[concat_val+"|tierPrice"]){var tierprices=json_credit[concat_val+"|tierPrice"];if(0<tierprices.length)for(var k=0;k<tierprices.length;k++)used_qty>=tierprices[k].price_qty&&(j2t_points=tierprices[k].productTierPoints)}$("j2t-pts").innerHTML=j2t_math_points(used_qty,j2t_points,!1),checkJ2tPoints()}}}else{var test_qty=0;$("qty")&&(test_qty=$("qty").value),isNaN(test_qty)||($("j2t-pts").innerHTML=j2t_math_points(test_qty,j2t_points,!0)),checkJ2tPoints()}},"undefined"!=typeof spConfig&&(oldSpConfigure=spConfig.configureElement,spConfig.configureElement=function(el){oldSpConfigure.apply(spConfig,[el]),processPointsSelects()})):"undefined"!=typeof is_loaded_information&&"undefined"!=typeof j2t_points&&$("j2t-pts")&&$("qty")&&Event.observe($("qty"),"keyup",function(){isNaN($("qty").value)||($("j2t-pts").innerHTML=j2t_math_points($("qty").value,j2t_points,!0))})}),document.observe("dom:loaded",function(){var oldBundleChange,oldBundleChangeQty;"undefined"!=typeof is_loaded_information&&"undefined"!=typeof is_bundle&&is_bundle&&$("j2t-pts")&&("undefined"!=typeof bundle&&(oldBundleChange=bundle.changeSelection,bundle.changeSelection=function(el){oldBundleChange.apply(bundle,[el]),j2t_points_bundle()},oldBundleChangeQty=bundle.changeOptionQty,bundle.changeOptionQty=function(el,event){oldBundleChangeQty.apply(bundle,[el,event]),j2t_points_bundle()}),bundle_hidden=$$('#product-options-wrapper input[type="hidden"]'),bundle_select=$$(".bundle-option-select"),bundle_radio=$$(".product-options .radio"),bundle_checkbox=$$(".product-options .checkbox"),$$(".qty"),j2t_points_bundle())}),document.observe("dom:loaded",function(){var oldOpReloadPrice;"undefined"!=typeof is_loaded_information&&$("j2t-pts")&&(option_select=$$(".product-custom-option"),"undefined"!=typeof opConfig&&(oldOpReloadPrice=opConfig.reloadPrice,opConfig.reloadPrice=function(){oldOpReloadPrice.apply(opConfig),calculateOptionsPrice()}),calculateOptionsPrice())}),checkJ2tCloneText();